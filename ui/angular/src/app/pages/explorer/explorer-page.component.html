<div class="explorer">
	<header class="explorer__header">
		<app-board-controls
			[canStart]="facade.canStart()"
			[canPrev]="facade.canPrev()"
			[canNext]="facade.canNext()"
			[canEnd]="facade.canEnd()"
			(reset)="onReset()"
			(start)="onStart()"
			(prev)="onPrev()"
			(next)="onNext()"
			(end)="onEnd()"
		/>

		<mat-chip-set class="explorer__meta" aria-label="Explorer session info">
			<mat-chip>Mode: {{ facade.mode() }}</mat-chip>
			<mat-chip>Source: {{ facade.source().kind }}</mat-chip>
			<mat-chip>Ply: {{ facade.ply() }}</mat-chip>
		</mat-chip-set>
	</header>

	<div class="explorer__error" *ngIf="facade.lastError() as err">
		<span class="explorer__error-code">{{ err.code }}</span>
		<span class="explorer__error-message">{{ err.message }}</span>
	</div>

	<section class="explorer__board">
		<app-chess-board
			[fen]="facade.fen()"
			[inputEnabled]="inputEnabled()"
			[validateMoveAttempt]="validateMoveAttempt"
			[lastMoveSquares]="facade.lastMoveSquares()"
			[getLegalDestinationsFrom]="getLegalDestinationsFrom"
			[getLegalCaptureDestinationsFrom]="getLegalCaptureDestinationsFrom"
		/>
	</section>

	<aside class="explorer__side">
		<app-move-list
			[moves]="facade.moves()"
			[currentPly]="facade.ply()"
			(plySelected)="onPlySelected($event)"
		/>
	</aside>
</div>
